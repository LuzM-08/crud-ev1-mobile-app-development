<ion-content [fullscreen]="true">
  <ion-row>
    <ion-col size="12">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Registrar nuevo usuario</ion-card-title>
          <ion-card-subtitle>Ingresa tus credenciales</ion-card-subtitle>
        </ion-card-header>

        <ion-card-content>
        
          <form #loginForm="ngForm">

            <ion-input 
              [(ngModel)]="name" 
              name="name" 
              label="Nombre" 
              label-placement="floating" 
              fill="outline" 
              placeholder="Nombre" 
              required>
            </ion-input>
            <br>
           
            <ion-input 
              [(ngModel)]="lastName" 
              name="lastName" 
              label="Apellido" 
              label-placement="floating" 
              fill="outline" 
              placeholder="Apellido" 
              required>
            </ion-input>
            <br>
            
            <ion-input 
              [(ngModel)]="email" 
              name="email" 
              label="Correo" 
              label-placement="floating" 
              fill="outline" 
              placeholder="Correo" 
              required 
              email>
            </ion-input>
            
            <ion-text color="danger" *ngIf="loginForm.controls['email']?.invalid && loginForm.controls['email']?.touched">
              <small *ngIf="loginForm.controls['email']?.hasError('required')">* El correo es obligatorio.</small>
              <small *ngIf="loginForm.controls['email']?.hasError('email')">* Formato de correo inválido.</small>
            </ion-text>

            <br>

            <ion-input 
              [(ngModel)]="password" 
              name="password" 
              label-placement="floating" 
              fill="outline" 
              type="password" 
              label="Contraseña" 
              required 
              minlength="8">
              <ion-input-password-toggle slot="end"></ion-input-password-toggle>
            </ion-input>
            
            <ion-text color="danger" *ngIf="loginForm.controls['password']?.invalid && loginForm.controls['password']?.touched">
              <small *ngIf="loginForm.controls['password']?.hasError('required')">* La contraseña es obligatoria.</small>
              <small *ngIf="loginForm.controls['password']?.hasError('minlength')">* La contraseña debe contener al menos 8 caracteres.</small>
            </ion-text>

            <br>

            <ion-input 
              [(ngModel)]="repeatPassword" 
              name="repeatPassword" 
              label-placement="floating" 
              fill="outline" 
              type="password" 
              label="Repetir Contraseña" 
              required 
              minlength="8">
              <ion-input-password-toggle slot="end"></ion-input-password-toggle>
            </ion-input> 

            <ion-text color="danger" *ngIf="repeatPassword !== password && repeatPassword && loginForm.controls['repeatPassword']?.touched">
              <small>* Las contraseñas no coinciden.</small>
            </ion-text>

            <br>
            <ion-button expand="block" [disabled]="loginForm.invalid || repeatPassword !== password" (click)="goToLogin()">Completar registro</ion-button>
          </form>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-content>